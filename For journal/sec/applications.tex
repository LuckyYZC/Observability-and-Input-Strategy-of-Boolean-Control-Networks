% !Mode\dots ``TeX:UTF-8''
% !TEX root = ../root.tex
\section{Optimization}
\label{sec:app}

In the {\em Section \ref{sec:online}}, we present that the online observability is the the necessary and sufficient condition of determine the initial state $s_0$ of \BCNs\ in real time, then it can help us determine the initial state of some \BCNs\ in real time which can not be determined by the existing third and fourth observability. In addition, we can also use the online observability to some optimization in the process of determining the initial state of \BCNs, such as finding the shortest path and avoid entering critical states in the process of determining the initial state of \BCNs. %Because the output we observe is not sure, we use expected value and variance of the length of path and the times of entering critical states to help us to choose the input.If we research the systems described by \BCNs\ which are online observable but not satisfy the existing third and fourth observability, we can only use the online observability to determine their initial state in real time. If we have built the corresponding directed graphs for them, we can use the online observability to determine the initial state of these \BCNs. In addition, online observibility requires less observation costs for us to determine the initial state of some systems described by  \BCNs\ in real time. 


\subsection{Finding shortest path}
When we need to determine the initial state of a \BCN, an important aspect that we will consider is to find the shortest path to determine the initial state. In general, we can not find the shortest path definitely.  Fortunately, we can use the directed graph to make the best decision. For the path, we introduce two functions $\Pe(S, i_p)$ and $\Pv(S, i_p)$ to describe its expected value and variance, respectively. In order to better explain our idea, we define some functions in the following.

%We introduce two functions $Spe(S_i, I_i)$ and $Spv(S_i, I_i)$ to describe the expected value of the shortest path and variance of shortest path , $S_i$ is the possible states set and $I_i$ is the input we chose, the definition of $Spe(S_i, I_i)$ is as follows:\\
%With the $Spe(S_i, I_i)$ and $Spv(S_i, I_i)$ we can make the decision we like.


Some necessary statements before defining the functions $\Pe(S, i_p)$ and $\Pv(S, i_p)$:
\begin{itemize}
  \item $S$: the set of states.
  \item $\{i_1,i_2,\ldots, i_z\}$ : the right inputs set of $S$;
  \item $\{S_p^1,S_p^2,\ldots, S_p^k\}$ : the set of state sets, and its elements corresponding to the possible outputs $\{o_1,o_2,\ldots,o_k\}$. As we choose the input $i_p$ to determine initial state by $S$, for each $i_p$ in $\{i_1,i_2,\ldots, i_z\}$.
 % \item the fourth one implies the third one, second one and first one.
\end{itemize} 
\begin{definition}[$\Spe(S)$] \label{lspe}
 \[\Spe(S)= \min(\Pe(S, i_1),\Pe(S, i_2),\ldots,\Pe(S, i_z)).\] 
\end{definition}

\begin{definition}[$\Pe(S, i_p)$] 
When the $|S|=1$, we have that
$\Pe(S, i_p)=0$  for every $i_p$ in $\{i_1,i_2,\ldots, i_z\}$. According {\em Definition \ref{lspe}}, $\Spe(S)=0$ if $|S|=1$. But when the $|S|>1$, 
%and the $\{I_1,I_2,\cdots, I_p\}$ is the right inputs set of $S_i$. For every $I_i$ in $\{I_1,I_2,\cdots, I_p\}$ the $\{S_i^1,S_i^2,\cdots, S_i^k\}$ is a set of state sets whose elements corresponding to the possible outputs after input $I_i$, then 
we have that  
\[\Pe(S, i_p)=1 +\frac{\sum_{j=1}^k \Spe(S_p^j)|S_p^j|}{ |S|}\] 
%and 
%\[{\tt Spe}(S_i)= \min({\tt Pe}(S_i, I_1),{\tt Pe}(S_i, I_2),\cdots,{\tt Pe}(S_i, I_p))\]
\end{definition}

The function shortest path  expected value $\Spe(S)$ is to find the $i_p$ from $\{i_1,i_2,\ldots, i_z\}$ to calculat least $\Pe(S, i_p)$ for $S$. From the definition of $\Pe(S, i_p)$ we can know that if $|S|=1$ then we can make sure the state of \BCNs, that we need not choose the input anymore to determine the state of \BCNs. Therefore, for any input the path expected value $\Pe(S, i_p)$ would be $0$ and the shortest path expected value $\Spe(S)$ also would be $0$. But if $|S|>1$ we still need to choose input and observe the output. Only by this way we can determine the state of of \BCNs. Therefore, we can recursively define the $\Pe(S, i_p)$ and $\Spe(S)$ for each input $i_p$ in the right inputs set. The $\Pv(S, i_p)$ is defined in the similar way. Hence we omit the details of the definition of $\Pv(S, i_p)$ in this paper. \\

If we want to find the shortest path to determine the initial state of a \BCN, we can choose an input $i_p$ with least $\Pe(S, i_p)$. This input $i_p$ may help us find the shortes path to determine the initial state. But the output of \BCNs\ is uncertain after we choose the input $i_p$, hence selecting the $i_p$ which with least $\Pe(S, i_p)$ may leads to a very long path to determine the initial state of \BCNs. For better performce, we the can use the $\Pv(S, i_p)$ to avoid this risk. If the $\Pv(S, i_p)$ of input $i_p$ with is not very large, the risk after choosing $i_p$ would be not great too.
\subsection{Avoiding entering critical states}
In biological systems, some states of the genes may corresponding to unfavorable or dangerous situations \cite{Li2014Controllability}. So another important aspect that we consider is to avoid entering critical states in the process of determining the \BCN's initial state. Therefore, we construct two functions $\Ce(S, i_p)$ and $\Cv(S, i_p)$ to describe expected value and variance of the times of entering critical states too, the definition of $\Ce(S, i_p)$ is as follows.\\
\begin{definition}[$\Lce(S)$] \label{lce}
\[\Lce(S)= \min(\Ce(S, i_1),\Ce(S, i_2),\ldots,)\Ce(S, i_z)\]
\end{definition}
\begin{definition}[$\Ce(S, i_p)$] 
When the $|S|=1$, and for every $i_p$ in $\Delta_M$, we have: \[\Ce(S, i_p)=|S \cap S_{cri} |\] 
According {\em Definition \ref{lce}}, %{\tt Spe}$(S_i)=0$ if $|S_i|=1$ 
\[\Lce(S)=\Ce(S, i_p)=|S \cap S_{cri} |\] 
But when the $|S|>1$ 
%and the $\{I_1,I_2,\cdots, I_p\}$ is the right inputs set of $S_i$. For every $ I_i$ in $\{I_1,I_2,\cdots, I_p\}$ the $\{S_i^1,S_i^2,\cdots, S_i^k\}$ is a set of state sets whose elements corresponding to the possible outputs after input $I_i$, then 
we have that 
\[\Ce(S, i_p)=|S \cap S_{cri} | +\frac{\sum_{j=1}^k \Lce(S_p^j)|S_p^j|}{ |S|} \] 
%and 
%\[{\tt Lce}(S_i)= \min({\tt Ce}(S_i, I_1),{\tt Ce}(S_i, I_2),\cdots,){\tt Ce}(S_i, I_p)\]
\end{definition}

Where $S_{cri}$ is the critical states set of the \BCN\ we research. The definition of $\Ce(S, i_p)$ has some difference with $\Pe(S, i_p)$, because we need to use the critical states set $S_{cri}$. So that  we can analyze the possibility of entering the  critical states when we infer the possible states set of \BCNs, and we can get the definitions of $\Cv(S, i_p)$ in similar ways. We omit the details of the definition of $\Cv(S, i_p)$ in this paper as well. 

The use of $\Ce(S, i_p)$ and $\Cv(S, i_p)$ are similar to $\Pe(S, i_p)$ and $\Pv(S, i_p)$ respectively. They help us avoid entering critical states of \BCNs\ in the process of determining the initial state of \BCNs. With these four functions $\Ce(S, i_p)$, $\Cv(S, i_p)$, $\Ce(S, i_p)$ and $\Cv(S, i_p)$, we can make the best decision we like. 

In the four existing types of observability, they have not property {\em interactivity}. We can not analyze the state of \BCNs\ dynamically, hence it would be hard to find the best path we like in the process of determining the initial state of \BCNs. However, this problem can be solved by the online observability of \BCNs\ better.